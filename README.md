# 🐎 Жая - Цифровая платформа управления производством

Профессиональная система управления производством мясного деликатеса "Жая" с аутентификацией, ролевым доступом и детальной аналитикой.

---

## 🚀 Быстрый старт

### 1. Установка зависимостей

```bash
pip install streamlit pandas numpy plotly scikit-learn openpyxl joblib
```

### 2. Запуск приложения

```bash
streamlit run app.py
```

### 3. Вход в систему

**Демо-учетные записи:**

| Роль | Логин | Пароль | Описание |
|------|-------|--------|----------|
| 👑 Администратор | `admin` | `admin123` | Полный доступ ко всем функциям |
| 👔 Менеджер производства | `manager` | `manager123` | Dashboard, отчеты, ввод данных |
| 🔧 Оператор | `operator` | `operator123` | Dashboard, ввод данных производства |
| 📊 Аналитик | `analyst` | `analyst123` | Dashboard, отчеты, ML модели |

---

## 📁 Структура проекта

```
Meat_Digitalization/
├── app.py                     # 🎯 Главный файл приложения (с аутентификацией)
├── auth.py                    # 🔐 Система аутентификации и управления ролями
├── ui.py                      # 🌐 Локализация (RU/EN/KK) и UI утилиты
├── data_loader.py             # 📊 Загрузка данных из Excel/CSV
├── database.py                # 🗄️ Работа с SQLite (измерения, история)
├── ml.py                      # 🤖 ML модели (прогноз pH)
├── db_utils.py                # 🔧 Вспомогательные функции для БД
│
├── pages/                     # 📄 Страницы приложения
│   ├── dashboard.py           # 🎯 Главный Dashboard с KPI (НОВОЕ!)
│   ├── reports.py             # 📊 Детальные отчеты о производстве (НОВОЕ!)
│   ├── admin.py               # ⚙️ Административная панель (НОВОЕ!)
│   ├── home.py                # 🏠 Домашняя страница
│   ├── production.py          # ⚙️ Технологический процесс
│   ├── regression.py          # 📈 Регрессионные модели качества
│   ├── ph_modeling.py         # 🌡️ Моделирование pH
│   ├── seabuckthorn.py        # 🔬 Анализ с экстрактом облепихи
│   ├── data_exploration.py    # 🗂️ Исследование данных
│   ├── history_db.py          # 📚 История измерений
│   ├── ml_training.py         # 🧠 ML обучение и прогнозирование
│   └── new_data_input.py      # ➕ Ввод новых партий
│
└── data/                      # 💾 Базы данных
    ├── users.db               # 👥 База пользователей и логов
    ├── measurements.db        # 📊 База измерений производства
    ├── model.pkl              # 🤖 Обученная ML модель
    └── scaler.pkl             # 📐 Scaler для нормализации
```

---

## 🔐 Система аутентификации

### Роли и права доступа

| Роль | Dashboard | Отчеты | Ввод данных | ML | История | Админ-панель |
|------|-----------|--------|-------------|----|---------|--------------| 
| 👑 Администратор | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| 👔 Менеджер | ✅ | ✅ | ✅ | ❌ | ✅ | ❌ |
| 🔧 Оператор | ✅ | ❌ | ✅ | ❌ | ❌ | ❌ |
| 📊 Аналитик | ✅ | ✅ | ❌ | ✅ | ✅ | ❌ |

### Функции аутентификации

- **Безопасная аутентификация:** SHA-256 хеширование паролей
- **Сессии:** Управление временем жизни сессий (по умолчанию 8 часов)
- **Логирование:** Полная история активности пользователей
- **Ролевой доступ:** Гибкая система прав доступа к функциям

---

## 🎯 Основные возможности

### 1. 📊 Dashboard (Главная панель)

**Что отображается:**
- **5 главных KPI:** Производство, Выход, pH, Активные партии, Эффективность
- **График производства за неделю:** Факт vs План
- **Мониторинг pH по стадиям:** От приемки до готового продукта
- **Статус линий:** Текущее состояние всех производственных линий
- **Последние события:** Лента активности в реальном времени
- **Распределение по качеству:** Категоризация продукции
- **Топ операторов:** Рейтинг эффективности персонала

**Реалистичные данные:**
- Генерация правдоподобных значений на основе технологии
- Интеграция с реальными данными из БД (если есть)
- Интерактивные графики Plotly

### 2. 📈 Отчеты о производстве

**5 типов отчетов:**

#### 📅 Производственный отчет
- Детальная статистика производства за период
- Выполнение плана по дням
- Анализ простоев и брака
- Экспорт в CSV

#### 📈 Анализ качества
- Мониторинг pH, влажности, активности воды
- Перекисное число (ТБЧ) - окислительная стабильность
- Органолептические показатели
- Соответствие нормативам

#### 💰 Экономические показатели
- Выручка и себестоимость
- Структура затрат
- Рентабельность производства
- Детальная разбивка по статьям

#### ⚙️ Технологический аудит
- Чеклист соответствия стандартам
- Критические контрольные точки (HACCP)
- Проверка технологических параметров

#### 👥 Эффективность персонала
- Производительность по сменам
- Рейтинг операторов
- KPI персонала

### 3. ⚙️ Административная панель (только для админов)

**Функции:**
- 👥 **Управление пользователями:** Создание, редактирование, удаление
- 📊 **Мониторинг активности:** Логи входов и действий
- 🔒 **Настройки безопасности:** Политика паролей, управление сессиями
- ⚙️ **Системные настройки:** Резервное копирование, уведомления
